const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/leaflet-src-GjrH1-Bf.js","assets/jsx-runtime-IdAWuXfe.js","assets/leaflet-routing-machine-DT5X7rK1.js"])))=>i.map(i=>d[i]);
import{_ as N}from"./pickup-CZ7IcgFY.js";import{r as o,j as t}from"./jsx-runtime-IdAWuXfe.js";import{a as T}from"./axios-BimPEqV4.js";import"./CommonNav-DYSDwl9E.js";import"./index-ugiZISQl.js";import"./router-CdQiufPQ.js";import"./Table-CqVbvJcZ.js";import"./components-CJTaBzP6.js";import"./isUserValid-BdCa-Ar8.js";import"./js.cookie-Cz0CWeBA.js";const V=({startAddress:m,endAddress:p})=>{const[d,g]=o.useState(null),[r,h]=o.useState(null),[i,w]=o.useState(null),x=o.useRef(null),[e,b]=o.useState(null),[v,S]=o.useState(null),[_,C]=o.useState(null);return o.useEffect(()=>{typeof window<"u"&&N(()=>import("./leaflet-src-GjrH1-Bf.js").then(s=>s.l),__vite__mapDeps([0,1])).then(s=>{b(s.default);const f=async a=>{try{const n=await T.get("https://nominatim.openstreetmap.org/search",{params:{q:a,format:"json",limit:1}}),[l]=n.data;return[parseFloat(l.lat),parseFloat(l.lon)]}catch(n){return console.error("Error fetching geocoding data:",n),null}};(async()=>{let a;m?(a=await f(m),h(a)):navigator.geolocation.getCurrentPosition(async l=>{const{latitude:u,longitude:c}=l.coords;g([u,c]),h([u,c]),a=[u,c]});const n=await f(p);w(n),!d&&a&&g(a)})()})},[m,p]),o.useEffect(()=>{if(d&&r&&i&&e&&x.current){const s=e.map(x.current).setView(d,50);e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(s);const f=e.divIcon({className:"custom-icon",html:'<i className="ri-map-pin-fill" style="color: blue; font-size: 24px;"></i>',iconSize:[30,30]}),j=e.divIcon({className:"custom-icon",html:'<i className="ri-flag-fill" style="color: red; font-size: 24px;"></i>',iconSize:[30,30]});e.marker(r,{icon:f}).addTo(s).bindPopup(`Start: ${m||"Your Current Location"}`),e.marker(i,{icon:j}).addTo(s).bindPopup(`End: ${p}`);const a=e.latLngBounds([r,i]);return s.fitBounds(a,{padding:[50,50]}),N(()=>import("./leaflet-routing-machine-DT5X7rK1.js").then(n=>n.l),__vite__mapDeps([2,1])).then(()=>{e.Routing.control({waypoints:[e.latLng(r),e.latLng(i)],routeWhileDragging:!1,show:!1,addWaypoints:!1,draggableWaypoints:!1,createMarker:function(){return null}}).addTo(s).on("routesfound",function(l){const u=l.routes[0],{summary:c}=u,y=c.totalTime,E=Math.floor(y/3600),L=Math.floor(y%3600/60);S((c.totalDistance/1e3).toFixed(2)+" km"),C(`${E}h ${L}m`)})}),()=>{s.off(),s.remove()}}},[d,r,i,e]),!d||!e||!r||!i?t.jsx("div",{className:"flex items-center justify-center w-full h-screen bg-gray-100",children:t.jsx("div",{className:"text-lg font-semibold text-gray-700",children:"Loading map..."})}):t.jsxs("div",{className:"relative h-screen w-full bg-gray-100",children:[t.jsx("div",{ref:x,className:"w-full h-[86%] bg-gray-200  shadow-lg overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-200 to-transparent opacity-70"})}),t.jsxs("div",{className:"absolute bottom-0 w-full md:px-6 py-4 rounded-t bg-white border-t border-gray-300 shadow-xl",children:[t.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-800 mb-3",children:[t.jsxs("span",{className:"flex items-center space-x-2",children:[t.jsx("i",{className:"ri-map-pin-fill text-blue-600 text-lg"}),t.jsx("span",{className:"font-medium",children:"Start:"}),t.jsx("span",{children:m||"Current Location"})]}),t.jsx("i",{className:"ri-arrow-left-right-fill text-gray-600"}),t.jsxs("span",{className:"flex items-center space-x-2",children:[t.jsx("i",{className:"ri-flag-fill text-red-600 text-lg"}),t.jsx("span",{className:"font-medium",children:"End:"}),t.jsx("span",{children:p})]})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-800",children:[t.jsxs("span",{className:"flex items-center space-x-2",children:[t.jsx("i",{className:"ri-time-fill text-yellow-600 text-lg"}),t.jsx("span",{className:"font-medium",children:"Time:"}),t.jsx("span",{children:_||"Calculating..."})]}),t.jsx("i",{className:"ri-arrow-left-right-fill text-gray-600"}),t.jsxs("span",{className:"flex items-center space-x-2",children:[t.jsx("i",{className:"ri-road-map-fill text-red-600 text-lg"}),t.jsx("span",{className:"font-medium",children:"Distance:"}),t.jsx("span",{children:v||"Calculating..."})]})]})]})]})};export{V as default};
