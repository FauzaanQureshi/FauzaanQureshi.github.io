import{R as g,j as e}from"./jsx-runtime-IdAWuXfe.js";import{B as p}from"./react-toastify.esm-CVN34uGn.js";import{i as b}from"./axios-Bl6FJLpW.js";import{j as x,r as h}from"./responses-BqwfpmZg.js";import{u as w,F as j,L as y}from"./components-CJTaBzP6.js";import"./axios-BimPEqV4.js";import"./router-CdQiufPQ.js";import"./index-ugiZISQl.js";function $(){return[{title:"Register | Katayani Organics"}]}const C=async({request:s})=>{var i,u,c,m;const o=await s.formData(),n=String(o.get("username")),l=String(o.get("email")),t=String(o.get("password")),d=String(o.get("confirmpassword")),a={};if(n||(a.username="Username is required."),l.includes("@")||(a.email="Invalid email."),t||(a.password="Password is required."),(t.length<8||!/[A-Z]/.test(t)||!/[a-z]/.test(t)||!/[0-9]/.test(t)||!/[\W_]/.test(t))&&(a.password="Password must be at least 8 characters long and contain uppercase, lowercase, number, and special character."),t!==d&&(a.confirmpassword="Passwords do not match."),Object.keys(a).length>0)return x({errors:a});try{const r=await b.post("/user/",{username:n,email:l,password:t,role_id:1});if(r.status===201||r.status===200)return p.success("Registration successful!"),h("/login")}catch(r){return console.error("Error during registration:",r.response?r.response.data:r.message),r.response&&r.response.status===422?(p.error("Validation failed. Please check your inputs."),x({errors:r.response.data})):(p.error((u=(i=r.response)==null?void 0:i.data)==null?void 0:u.detail),a.username=(m=(c=r.response)==null?void 0:c.data)==null?void 0:m.detail,x({errors:{general:"Registration failed."}}))}};function I(){var c,m,r,f;const s=w(),o=(c=s==null?void 0:s.errors)==null?void 0:c.username,n=(m=s==null?void 0:s.errors)==null?void 0:m.email,l=(r=s==null?void 0:s.errors)==null?void 0:r.password,t=(f=s==null?void 0:s.errors)==null?void 0:f.confirmpassword,[d,a]=g.useState(!1),[i,u]=g.useState(!1);return e.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 relative p-5 md:p-0",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-200 via-yellow-200 to-brown-200 absolute inset-0 opacity-50"}),e.jsx("div",{className:"hidden md:block absolute top-10 left-10 w-[300px] h-[300px] bg-green-400 rounded-full blur-xl opacity-20"}),e.jsx("div",{className:"hidden md:block absolute top-40 right-20 w-[200px] h-[200px] bg-yellow-500 rounded-full blur-xl opacity-20"}),e.jsx("div",{className:"hidden md:block absolute bottom-20 left-40 w-[250px] h-[250px] bg-brown-500 rounded-full blur-xl opacity-20"}),e.jsx("div",{className:"hidden md:block absolute bottom-10 right-10 w-[150px] h-[150px] bg-green-600 rounded-full blur-xl opacity-20"})]}),e.jsxs("div",{className:"relative w-full bg-white text-gray-700 p-6 rounded-lg md:rounded shadow-lg max-w-sm md:max-w-md lg:max-w-lg md:p-8 lg:p-10",children:[e.jsxs("h1",{className:"text-2xl font-bold text-center mb-6 md:text-3xl lg:text-4xl",children:[e.jsx("span",{className:"text-gray-700",children:"Create Your"})," ",e.jsx("span",{className:"text-green-600",children:"Account"})]}),e.jsxs(j,{method:"post",className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"username",name:"username",type:"text",placeholder:"Username",className:`w-full bg-gray-50 border ${o?"border-red-500 focus:border-red-600":"border-green-400 focus:border-green-600"} py-3 px-4 text-base rounded-md focus:outline-none transition-all`}),o&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:o})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",name:"email",type:"text",placeholder:"Email",className:`w-full bg-gray-50 border ${n?"border-red-500 focus:border-red-600":"border-green-400 focus:border-green-600"} py-3 px-4 text-base rounded-md focus:outline-none transition-all`}),n&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:n})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:d?"text":"password",placeholder:"Password",className:`w-full bg-gray-50 border ${l?"border-red-500 focus:border-red-600":"border-green-400 focus:border-green-600"} py-3 px-4 text-base rounded-md focus:outline-none transition-all`}),e.jsx("i",{className:`absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-600 ${d?"ri-eye-fill":"ri-eye-off-fill"}`,onClick:()=>a(!d)})]}),l&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:l})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmpassword",name:"confirmpassword",type:i?"text":"password",placeholder:"Confirm Password",className:`w-full bg-gray-50 border ${t?"border-red-500 focus:border-red-600":"border-green-400 focus:border-green-600"} py-3 px-4 text-base rounded-md focus:outline-none transition-all`}),e.jsx("i",{className:`absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-600 ${i?"ri-eye-fill":"ri-eye-off-fill"}`,onClick:()=>u(!i)})]}),t&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:t})]}),e.jsxs("div",{className:"bg-gray-100 border border-gray-300 p-4 rounded-md text-sm mt-4",children:[e.jsx("h2",{className:"font-semibold mb-2",children:"Password Setup Guidelines:"}),e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{children:"At least 8 characters long"}),e.jsx("li",{children:"Include both uppercase (A-Z) and lowercase (a-z) letters"}),e.jsx("li",{children:"Include at least one number (0-9)"}),e.jsx("li",{children:"Include at least one special character (e.g., !@#$%^&*)"}),e.jsx("li",{children:'Avoid common words or sequences (e.g., "password123")'})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-md font-semibold transition-transform transform hover:scale-105",children:"Sign Up"}),e.jsxs("div",{className:"flex justify-center mt-6 text-sm text-gray-600",children:[e.jsx("span",{children:"Already have an account? "}),e.jsx(y,{to:"/login",className:"text-green-600 font-semibold hover:text-green-700 transition ml-1",children:"Sign In"})]})]})]})]})}export{C as clientAction,I as default,$ as meta};
