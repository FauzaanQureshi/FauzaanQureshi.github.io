/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}var $;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($||($={}));const Ut="popstate";function Pn(e){e===void 0&&(e={});function t(r,i){let{pathname:d,search:l,hash:c}=r.location;return We("",{pathname:d,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ke(i)}return Sr(t,n,null,e)}function U(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ce(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Dr(){return Math.random().toString(36).substr(2,8)}function At(e,t){return{usr:e.state,key:e.key,idx:t}}function We(e,t,n,r){return n===void 0&&(n=null),z({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Se(t):t,{state:n,key:t&&t.key||r||Dr()})}function ke(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Se(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Sr(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:d=!1}=r,l=i.history,c=$.Pop,u=null,p=y();p==null&&(p=0,l.replaceState(z({},l.state,{idx:p}),""));function y(){return(l.state||{idx:null}).idx}function g(){c=$.Pop;let L=y(),N=L==null?null:L-p;p=L,u&&u({action:c,location:M.location,delta:N})}function D(L,N){c=$.Push;let O=We(M.location,L,N);p=y()+1;let ie=At(O,p),K=M.createHref(O);try{l.pushState(ie,"",K)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;i.location.assign(K)}d&&u&&u({action:c,location:M.location,delta:1})}function E(L,N){c=$.Replace;let O=We(M.location,L,N);p=y();let ie=At(O,p),K=M.createHref(O);l.replaceState(ie,"",K),d&&u&&u({action:c,location:M.location,delta:0})}function F(L){let N=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof L=="string"?L:ke(L);return O=O.replace(/ $/,"%20"),U(N,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,N)}let M={get action(){return c},get location(){return e(i,l)},listen(L){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ut,g),u=L,()=>{i.removeEventListener(Ut,g),u=null}},createHref(L){return t(i,L)},createURL:F,encodeLocation(L){let N=F(L);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:D,replace:E,go(L){return l.go(L)}};return M}var A;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(A||(A={}));const Er=new Set(["lazy","caseSensitive","path","id","index","children"]);function Pr(e){return e.index===!0}function Ke(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,d)=>{let l=[...n,String(d)],c=typeof i.id=="string"?i.id:l.join("-");if(U(i.index!==!0||!i.children,"Cannot specify children on an index route"),U(!r[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),Pr(i)){let u=z({},i,t(i),{id:c});return r[c]=u,u}else{let u=z({},i,t(i),{id:c,children:void 0});return r[c]=u,i.children&&(u.children=Ke(i.children,t,l,r)),u}})}function je(e,t,n){return n===void 0&&(n="/"),it(e,t,n,!1)}function it(e,t,n,r){let i=typeof t=="string"?Se(t):t,d=ot(i.pathname||"/",n);if(d==null)return null;let l=Gt(e);xr(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let p=zr(d);c=Or(l[u],p,r)}return c}function Mr(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function Gt(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(d,l,c)=>{let u={relativePath:c===void 0?d.path||"":c,caseSensitive:d.caseSensitive===!0,childrenIndex:l,route:d};u.relativePath.startsWith("/")&&(U(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let p=He([r,u.relativePath]),y=n.concat(u);d.children&&d.children.length>0&&(U(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Gt(d.children,t,y,p)),!(d.path==null&&!d.index)&&t.push({path:p,score:Ar(p,d.index),routesMeta:y})};return e.forEach((d,l)=>{var c;if(d.path===""||!((c=d.path)!=null&&c.includes("?")))i(d,l);else for(let u of Xt(d.path))i(d,l,u)}),t}function Xt(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),d=n.replace(/\?$/,"");if(r.length===0)return i?[d,""]:[d];let l=Xt(r.join("/")),c=[];return c.push(...l.map(u=>u===""?d:[d,u].join("/"))),i&&c.push(...l),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function xr(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:_r(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Lr=/^:[\w-]+$/,Tr=3,jr=2,Fr=1,Cr=10,Ur=-2,_t=e=>e==="*";function Ar(e,t){let n=e.split("/"),r=n.length;return n.some(_t)&&(r+=Ur),t&&(r+=jr),n.filter(i=>!_t(i)).reduce((i,d)=>i+(Lr.test(d)?Tr:d===""?Fr:Cr),r)}function _r(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Or(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},d="/",l=[];for(let c=0;c<r.length;++c){let u=r[c],p=c===r.length-1,y=d==="/"?t:t.slice(d.length)||"/",g=Ot({path:u.relativePath,caseSensitive:u.caseSensitive,end:p},y),D=u.route;if(!g&&p&&n&&!r[r.length-1].route.index&&(g=Ot({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},y)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:He([d,g.pathname]),pathnameBase:Kr(He([d,g.pathnameBase])),route:D}),g.pathnameBase!=="/"&&(d=He([d,g.pathnameBase]))}return l}function Ot(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ir(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let d=i[0],l=d.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,y,g)=>{let{paramName:D,isOptional:E}=y;if(D==="*"){let M=c[g]||"";l=d.slice(0,d.length-M.length).replace(/(.)\/+$/,"$1")}const F=c[g];return E&&!F?p[D]=void 0:p[D]=(F||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:l,pattern:e}}function Ir(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ce(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function zr(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ce(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ot(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Nr(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Se(e):e;return{pathname:n?n.startsWith("/")?n:Br(n,t):t,search:kr(r),hash:Vr(i)}}function Br(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ut(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qt(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hr(e,t){let n=Qt(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wr(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Se(e):(i=z({},e),U(!i.pathname||!i.pathname.includes("?"),ut("?","pathname","search",i)),U(!i.pathname||!i.pathname.includes("#"),ut("#","pathname","hash",i)),U(!i.search||!i.search.includes("#"),ut("#","search","hash",i)));let d=e===""||i.pathname==="",l=d?"/":i.pathname,c;if(l==null)c=n;else{let g=t.length-1;if(!r&&l.startsWith("..")){let D=l.split("/");for(;D[0]==="..";)D.shift(),g-=1;i.pathname=D.join("/")}c=g>=0?t[g]:"/"}let u=Nr(i,c),p=l&&l!=="/"&&l.endsWith("/"),y=(d||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(p||y)&&(u.pathname+="/"),u}const He=e=>e.join("/").replace(/\/\/+/g,"/"),Kr=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kr=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Vr=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Mn=function(t,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n,i=new Headers(r.headers);return i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),z({},r,{headers:i}))};class $r{constructor(t,n){this.type="DataWithResponseInit",this.data=t,this.init=n||null}}function xn(e,t){return new $r(e,typeof t=="number"?{status:t}:t)}class It extends Error{}class Ln{constructor(t,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],U(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((d,l)=>r=l),this.controller=new AbortController;let i=()=>r(new It("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(t).reduce((d,l)=>{let[c,u]=l;return Object.assign(d,{[c]:this.trackPromise(c,u)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(t,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,t,void 0,i),i=>this.onSettle(r,t,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(t,n,r,i){if(this.controller.signal.aborted&&r instanceof It)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>r}),Promise.reject(r);if(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),r===void 0&&i===void 0){let d=new Error('Deferred data for key "'+n+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>d}),this.emit(!1,n),Promise.reject(d)}return i===void 0?(Object.defineProperty(t,"_error",{get:()=>r}),this.emit(!1,n),Promise.reject(r)):(Object.defineProperty(t,"_data",{get:()=>i}),this.emit(!1,n),i)}emit(t,n){this.subscribers.forEach(r=>r(t,n))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(t){let n=!1;if(!this.done){let r=()=>this.cancel();t.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(d=>{t.removeEventListener("abort",r),(d||this.done)&&i(d)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return U(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,n)=>{let[r,i]=n;return Object.assign(t,{[r]:Jr(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function Yr(e){return e instanceof Promise&&e._tracked===!0}function Jr(e){if(!Yr(e))return e;if(e._error)throw e._error;return e._data}const Tn=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",t),new Response(null,z({},r,{headers:i}))};class ht{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function gt(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zt=["post","put","patch","delete"],Gr=new Set(Zt),Xr=["get",...Zt],Qr=new Set(Xr),Zr=new Set([301,302,303,307,308]),qr=new Set([307,308]),ft={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},en={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ze={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},yt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tn=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),qt="remix-router-transitions";function jn(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;U(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let a=e.detectErrorBoundary;i=o=>({hasErrorBoundary:a(o)})}else i=tn;let d={},l=Ke(e.routes,i,void 0,d),c,u=e.basename||"/",p=e.unstable_dataStrategy||sn,y=e.unstable_patchRoutesOnNavigation,g=z({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),D=null,E=new Set,F=1e3,M=new Set,L=null,N=null,O=null,ie=e.hydrationData!=null,K=je(l,e.history.location,u),te=null;if(K==null&&!y){let a=X(404,{pathname:e.history.location.pathname}),{matches:o,route:s}=$t(l);K=o,te={[s.id]:a}}K&&!e.hydrationData&&Ze(K,l,e.history.location.pathname).active&&(K=null);let ae;if(K)if(K.some(a=>a.route.lazy))ae=!1;else if(!K.some(a=>a.route.loader))ae=!0;else if(g.v7_partialHydration){let a=e.hydrationData?e.hydrationData.loaderData:null,o=e.hydrationData?e.hydrationData.errors:null,s=h=>h.route.loader?typeof h.route.loader=="function"&&h.route.loader.hydrate===!0?!1:a&&a[h.route.id]!==void 0||o&&o[h.route.id]!==void 0:!0;if(o){let h=K.findIndex(v=>o[v.route.id]!==void 0);ae=K.slice(0,h+1).every(s)}else ae=K.every(s)}else ae=e.hydrationData!=null;else if(ae=!1,K=[],g.v7_partialHydration){let a=Ze(null,l,e.history.location.pathname);a.active&&a.matches&&(K=a.matches)}let Ue,f={historyAction:e.history.action,location:e.history.location,matches:K,initialized:ae,navigation:ft,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||te,fetchers:new Map,blockers:new Map},B=$.Pop,J=!1,_,Q=!1,ee=new Map,re=null,Ee=!1,ye=!1,Ve=[],$e=new Set,k=new Map,Ye=0,Ae=-1,Pe=new Map,oe=new Set,Me=new Map,_e=new Map,le=new Set,ve=new Map,be=new Map,ar=new Map,Je;function ir(){if(D=e.history.listen(a=>{let{action:o,location:s,delta:h}=a;if(Je){Je(),Je=void 0;return}Ce(be.size===0||h!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let v=Lt({currentLocation:f.location,nextLocation:s,historyAction:o});if(v&&h!=null){let R=new Promise(P=>{Je=P});e.history.go(h*-1),Xe(v,{state:"blocked",location:s,proceed(){Xe(v,{state:"proceeding",proceed:void 0,reset:void 0,location:s}),R.then(()=>e.history.go(h))},reset(){let P=new Map(f.blockers);P.set(v,ze),G({blockers:P})}});return}return we(o,s)}),n){Sn(t,ee);let a=()=>En(t,ee);t.addEventListener("pagehide",a),re=()=>t.removeEventListener("pagehide",a)}return f.initialized||we($.Pop,f.location,{initialHydration:!0}),Ue}function or(){D&&D(),re&&re(),E.clear(),_&&_.abort(),f.fetchers.forEach((a,o)=>Ge(o)),f.blockers.forEach((a,o)=>xt(o))}function lr(a){return E.add(a),()=>E.delete(a)}function G(a,o){o===void 0&&(o={}),f=z({},f,a);let s=[],h=[];g.v7_fetcherPersist&&f.fetchers.forEach((v,R)=>{v.state==="idle"&&(le.has(R)?h.push(R):s.push(R))}),[...E].forEach(v=>v(f,{deletedFetchers:h,unstable_viewTransitionOpts:o.viewTransitionOpts,unstable_flushSync:o.flushSync===!0})),g.v7_fetcherPersist&&(s.forEach(v=>f.fetchers.delete(v)),h.forEach(v=>Ge(v)))}function xe(a,o,s){var h,v;let{flushSync:R}=s===void 0?{}:s,P=f.actionData!=null&&f.navigation.formMethod!=null&&ne(f.navigation.formMethod)&&f.navigation.state==="loading"&&((h=a.state)==null?void 0:h._isRedirect)!==!0,m;o.actionData?Object.keys(o.actionData).length>0?m=o.actionData:m=null:P?m=f.actionData:m=null;let S=o.loaderData?kt(f.loaderData,o.loaderData,o.matches||[],o.errors):f.loaderData,b=f.blockers;b.size>0&&(b=new Map(b),b.forEach((C,I)=>b.set(I,ze)));let w=J===!0||f.navigation.formMethod!=null&&ne(f.navigation.formMethod)&&((v=a.state)==null?void 0:v._isRedirect)!==!0;c&&(l=c,c=void 0),Ee||B===$.Pop||(B===$.Push?e.history.push(a,a.state):B===$.Replace&&e.history.replace(a,a.state));let j;if(B===$.Pop){let C=ee.get(f.location.pathname);C&&C.has(a.pathname)?j={currentLocation:f.location,nextLocation:a}:ee.has(a.pathname)&&(j={currentLocation:a,nextLocation:f.location})}else if(Q){let C=ee.get(f.location.pathname);C?C.add(a.pathname):(C=new Set([a.pathname]),ee.set(f.location.pathname,C)),j={currentLocation:f.location,nextLocation:a}}G(z({},o,{actionData:m,loaderData:S,historyAction:B,location:a,initialized:!0,navigation:ft,revalidation:"idle",restoreScrollPosition:jt(a,o.matches||f.matches),preventScrollReset:w,blockers:b}),{viewTransitionOpts:j,flushSync:R===!0}),B=$.Pop,J=!1,Q=!1,Ee=!1,ye=!1,Ve=[]}async function wt(a,o){if(typeof a=="number"){e.history.go(a);return}let s=pt(f.location,f.matches,u,g.v7_prependBasename,a,g.v7_relativeSplatPath,o==null?void 0:o.fromRouteId,o==null?void 0:o.relative),{path:h,submission:v,error:R}=zt(g.v7_normalizeFormMethod,!1,s,o),P=f.location,m=We(f.location,h,o&&o.state);m=z({},m,e.history.encodeLocation(m));let S=o&&o.replace!=null?o.replace:void 0,b=$.Push;S===!0?b=$.Replace:S===!1||v!=null&&ne(v.formMethod)&&v.formAction===f.location.pathname+f.location.search&&(b=$.Replace);let w=o&&"preventScrollReset"in o?o.preventScrollReset===!0:void 0,j=(o&&o.unstable_flushSync)===!0,C=Lt({currentLocation:P,nextLocation:m,historyAction:b});if(C){Xe(C,{state:"blocked",location:m,proceed(){Xe(C,{state:"proceeding",proceed:void 0,reset:void 0,location:m}),wt(a,o)},reset(){let I=new Map(f.blockers);I.set(C,ze),G({blockers:I})}});return}return await we(b,m,{submission:v,pendingError:R,preventScrollReset:w,replace:o&&o.replace,enableViewTransition:o&&o.unstable_viewTransition,flushSync:j})}function sr(){if(lt(),G({revalidation:"loading"}),f.navigation.state!=="submitting"){if(f.navigation.state==="idle"){we(f.historyAction,f.location,{startUninterruptedRevalidation:!0});return}we(B||f.historyAction,f.navigation.location,{overrideNavigation:f.navigation,enableViewTransition:Q===!0})}}async function we(a,o,s){_&&_.abort(),_=null,B=a,Ee=(s&&s.startUninterruptedRevalidation)===!0,vr(f.location,f.matches),J=(s&&s.preventScrollReset)===!0,Q=(s&&s.enableViewTransition)===!0;let h=c||l,v=s&&s.overrideNavigation,R=je(h,o,u),P=(s&&s.flushSync)===!0,m=Ze(R,h,o.pathname);if(m.active&&m.matches&&(R=m.matches),!R){let{error:T,notFoundMatches:Y,route:V}=st(o.pathname);xe(o,{matches:Y,loaderData:{},errors:{[V.id]:T}},{flushSync:P});return}if(f.initialized&&!ye&&pn(f.location,o)&&!(s&&s.submission&&ne(s.submission.formMethod))){xe(o,{matches:R},{flushSync:P});return}_=new AbortController;let S=Te(e.history,o,_.signal,s&&s.submission),b;if(s&&s.pendingError)b=[Fe(R).route.id,{type:A.error,error:s.pendingError}];else if(s&&s.submission&&ne(s.submission.formMethod)){let T=await dr(S,o,s.submission,R,m.active,{replace:s.replace,flushSync:P});if(T.shortCircuited)return;if(T.pendingActionResult){let[Y,V]=T.pendingActionResult;if(q(V)&&gt(V.error)&&V.error.status===404){_=null,xe(o,{matches:T.matches,loaderData:{},errors:{[Y]:V.error}});return}}R=T.matches||R,b=T.pendingActionResult,v=ct(o,s.submission),P=!1,m.active=!1,S=Te(e.history,S.url,S.signal)}let{shortCircuited:w,matches:j,loaderData:C,errors:I}=await ur(S,o,R,m.active,v,s&&s.submission,s&&s.fetcherSubmission,s&&s.replace,s&&s.initialHydration===!0,P,b);w||(_=null,xe(o,z({matches:j||R},Vt(b),{loaderData:C,errors:I})))}async function dr(a,o,s,h,v,R){R===void 0&&(R={}),lt();let P=Rn(o,s);if(G({navigation:P},{flushSync:R.flushSync===!0}),v){let b=await qe(h,o.pathname,a.signal);if(b.type==="aborted")return{shortCircuited:!0};if(b.type==="error"){let{boundaryId:w,error:j}=Qe(o.pathname,b);return{matches:b.partialMatches,pendingActionResult:[w,{type:A.error,error:j}]}}else if(b.matches)h=b.matches;else{let{notFoundMatches:w,error:j,route:C}=st(o.pathname);return{matches:w,pendingActionResult:[C.id,{type:A.error,error:j}]}}}let m,S=Be(h,o);if(!S.route.action&&!S.route.lazy)m={type:A.error,error:X(405,{method:a.method,pathname:o.pathname,routeId:S.route.id})};else if(m=(await Oe("action",f,a,[S],h,null))[S.route.id],a.signal.aborted)return{shortCircuited:!0};if(De(m)){let b;return R&&R.replace!=null?b=R.replace:b=Ht(m.response.headers.get("Location"),new URL(a.url),u)===f.location.pathname+f.location.search,await Re(a,m,!0,{submission:s,replace:b}),{shortCircuited:!0}}if(ge(m))throw X(400,{type:"defer-action"});if(q(m)){let b=Fe(h,S.route.id);return(R&&R.replace)!==!0&&(B=$.Push),{matches:h,pendingActionResult:[b.route.id,m]}}return{matches:h,pendingActionResult:[S.route.id,m]}}async function ur(a,o,s,h,v,R,P,m,S,b,w){let j=v||ct(o,R),C=R||P||Jt(j),I=!Ee&&(!g.v7_partialHydration||!S);if(h){if(I){let H=Rt(w);G(z({navigation:j},H!==void 0?{actionData:H}:{}),{flushSync:b})}let x=await qe(s,o.pathname,a.signal);if(x.type==="aborted")return{shortCircuited:!0};if(x.type==="error"){let{boundaryId:H,error:Z}=Qe(o.pathname,x);return{matches:x.partialMatches,loaderData:{},errors:{[H]:Z}}}else if(x.matches)s=x.matches;else{let{error:H,notFoundMatches:Z,route:W}=st(o.pathname);return{matches:Z,loaderData:{},errors:{[W.id]:H}}}}let T=c||l,[Y,V]=Nt(e.history,f,s,C,o,g.v7_partialHydration&&S===!0,g.v7_skipActionErrorRevalidation,ye,Ve,$e,le,Me,oe,T,u,w);if(dt(x=>!(s&&s.some(H=>H.route.id===x))||Y&&Y.some(H=>H.route.id===x)),Ae=++Ye,Y.length===0&&V.length===0){let x=Pt();return xe(o,z({matches:s,loaderData:{},errors:w&&q(w[1])?{[w[0]]:w[1].error}:null},Vt(w),x?{fetchers:new Map(f.fetchers)}:{}),{flushSync:b}),{shortCircuited:!0}}if(I){let x={};if(!h){x.navigation=j;let H=Rt(w);H!==void 0&&(x.actionData=H)}V.length>0&&(x.fetchers=fr(V)),G(x,{flushSync:b})}V.forEach(x=>{k.has(x.key)&&he(x.key),x.controller&&k.set(x.key,x.controller)});let Ie=()=>V.forEach(x=>he(x.key));_&&_.signal.addEventListener("abort",Ie);let{loaderResults:de,fetcherResults:Le}=await Dt(f,s,Y,V,a);if(a.signal.aborted)return{shortCircuited:!0};_&&_.signal.removeEventListener("abort",Ie),V.forEach(x=>k.delete(x.key));let pe=at(de);if(pe)return await Re(a,pe.result,!0,{replace:m}),{shortCircuited:!0};if(pe=at(Le),pe)return oe.add(pe.key),await Re(a,pe.result,!0,{replace:m}),{shortCircuited:!0};let{loaderData:et,errors:ue}=Kt(f,s,Y,de,w,V,Le,ve);ve.forEach((x,H)=>{x.subscribe(Z=>{(Z||x.done)&&ve.delete(H)})}),g.v7_partialHydration&&S&&f.errors&&Object.entries(f.errors).filter(x=>{let[H]=x;return!Y.some(Z=>Z.route.id===H)}).forEach(x=>{let[H,Z]=x;ue=Object.assign(ue||{},{[H]:Z})});let tt=Pt(),rt=Mt(Ae),nt=tt||rt||V.length>0;return z({matches:s,loaderData:et,errors:ue},nt?{fetchers:new Map(f.fetchers)}:{})}function Rt(a){if(a&&!q(a[1]))return{[a[0]]:a[1].data};if(f.actionData)return Object.keys(f.actionData).length===0?null:f.actionData}function fr(a){return a.forEach(o=>{let s=f.fetchers.get(o.key),h=Ne(void 0,s?s.data:void 0);f.fetchers.set(o.key,h)}),new Map(f.fetchers)}function cr(a,o,s,h){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");k.has(a)&&he(a);let v=(h&&h.unstable_flushSync)===!0,R=c||l,P=pt(f.location,f.matches,u,g.v7_prependBasename,s,g.v7_relativeSplatPath,o,h==null?void 0:h.relative),m=je(R,P,u),S=Ze(m,R,P);if(S.active&&S.matches&&(m=S.matches),!m){se(a,o,X(404,{pathname:P}),{flushSync:v});return}let{path:b,submission:w,error:j}=zt(g.v7_normalizeFormMethod,!0,P,h);if(j){se(a,o,j,{flushSync:v});return}let C=Be(m,b);if(J=(h&&h.preventScrollReset)===!0,w&&ne(w.formMethod)){hr(a,o,b,C,m,S.active,v,w);return}Me.set(a,{routeId:o,path:b}),pr(a,o,b,C,m,S.active,v,w)}async function hr(a,o,s,h,v,R,P,m){lt(),Me.delete(a);function S(W){if(!W.route.action&&!W.route.lazy){let fe=X(405,{method:m.formMethod,pathname:s,routeId:o});return se(a,o,fe,{flushSync:P}),!0}return!1}if(!R&&S(h))return;let b=f.fetchers.get(a);ce(a,Dn(m,b),{flushSync:P});let w=new AbortController,j=Te(e.history,s,w.signal,m);if(R){let W=await qe(v,s,j.signal);if(W.type==="aborted")return;if(W.type==="error"){let{error:fe}=Qe(s,W);se(a,o,fe,{flushSync:P});return}else if(W.matches){if(v=W.matches,h=Be(v,s),S(h))return}else{se(a,o,X(404,{pathname:s}),{flushSync:P});return}}k.set(a,w);let C=Ye,T=(await Oe("action",f,j,[h],v,a))[h.route.id];if(j.signal.aborted){k.get(a)===w&&k.delete(a);return}if(g.v7_fetcherPersist&&le.has(a)){if(De(T)||q(T)){ce(a,me(void 0));return}}else{if(De(T))if(k.delete(a),Ae>C){ce(a,me(void 0));return}else return oe.add(a),ce(a,Ne(m)),Re(j,T,!1,{fetcherSubmission:m});if(q(T)){se(a,o,T.error);return}}if(ge(T))throw X(400,{type:"defer-action"});let Y=f.navigation.location||f.location,V=Te(e.history,Y,w.signal),Ie=c||l,de=f.navigation.state!=="idle"?je(Ie,f.navigation.location,u):f.matches;U(de,"Didn't find any matches after fetcher action");let Le=++Ye;Pe.set(a,Le);let pe=Ne(m,T.data);f.fetchers.set(a,pe);let[et,ue]=Nt(e.history,f,de,m,Y,!1,g.v7_skipActionErrorRevalidation,ye,Ve,$e,le,Me,oe,Ie,u,[h.route.id,T]);ue.filter(W=>W.key!==a).forEach(W=>{let fe=W.key,Ct=f.fetchers.get(fe),Rr=Ne(void 0,Ct?Ct.data:void 0);f.fetchers.set(fe,Rr),k.has(fe)&&he(fe),W.controller&&k.set(fe,W.controller)}),G({fetchers:new Map(f.fetchers)});let tt=()=>ue.forEach(W=>he(W.key));w.signal.addEventListener("abort",tt);let{loaderResults:rt,fetcherResults:nt}=await Dt(f,de,et,ue,V);if(w.signal.aborted)return;w.signal.removeEventListener("abort",tt),Pe.delete(a),k.delete(a),ue.forEach(W=>k.delete(W.key));let x=at(rt);if(x)return Re(V,x.result,!1);if(x=at(nt),x)return oe.add(x.key),Re(V,x.result,!1);let{loaderData:H,errors:Z}=Kt(f,de,et,rt,void 0,ue,nt,ve);if(f.fetchers.has(a)){let W=me(T.data);f.fetchers.set(a,W)}Mt(Le),f.navigation.state==="loading"&&Le>Ae?(U(B,"Expected pending action"),_&&_.abort(),xe(f.navigation.location,{matches:de,loaderData:H,errors:Z,fetchers:new Map(f.fetchers)})):(G({errors:Z,loaderData:kt(f.loaderData,H,de,Z),fetchers:new Map(f.fetchers)}),ye=!1)}async function pr(a,o,s,h,v,R,P,m){let S=f.fetchers.get(a);ce(a,Ne(m,S?S.data:void 0),{flushSync:P});let b=new AbortController,w=Te(e.history,s,b.signal);if(R){let T=await qe(v,s,w.signal);if(T.type==="aborted")return;if(T.type==="error"){let{error:Y}=Qe(s,T);se(a,o,Y,{flushSync:P});return}else if(T.matches)v=T.matches,h=Be(v,s);else{se(a,o,X(404,{pathname:s}),{flushSync:P});return}}k.set(a,b);let j=Ye,I=(await Oe("loader",f,w,[h],v,a))[h.route.id];if(ge(I)&&(I=await vt(I,w.signal,!0)||I),k.get(a)===b&&k.delete(a),!w.signal.aborted){if(le.has(a)){ce(a,me(void 0));return}if(De(I))if(Ae>j){ce(a,me(void 0));return}else{oe.add(a),await Re(w,I,!1);return}if(q(I)){se(a,o,I.error);return}U(!ge(I),"Unhandled fetcher deferred data"),ce(a,me(I.data))}}async function Re(a,o,s,h){let{submission:v,fetcherSubmission:R,replace:P}=h===void 0?{}:h;o.response.headers.has("X-Remix-Revalidate")&&(ye=!0);let m=o.response.headers.get("Location");U(m,"Expected a Location header on the redirect Response"),m=Ht(m,new URL(a.url),u);let S=We(f.location,m,{_isRedirect:!0});if(n){let T=!1;if(o.response.headers.has("X-Remix-Reload-Document"))T=!0;else if(yt.test(m)){const Y=e.history.createURL(m);T=Y.origin!==t.location.origin||ot(Y.pathname,u)==null}if(T){P?t.location.replace(m):t.location.assign(m);return}}_=null;let b=P===!0||o.response.headers.has("X-Remix-Replace")?$.Replace:$.Push,{formMethod:w,formAction:j,formEncType:C}=f.navigation;!v&&!R&&w&&j&&C&&(v=Jt(f.navigation));let I=v||R;if(qr.has(o.response.status)&&I&&ne(I.formMethod))await we(b,S,{submission:z({},I,{formAction:m}),preventScrollReset:J,enableViewTransition:s?Q:void 0});else{let T=ct(S,v);await we(b,S,{overrideNavigation:T,fetcherSubmission:R,preventScrollReset:J,enableViewTransition:s?Q:void 0})}}async function Oe(a,o,s,h,v,R){let P,m={};try{P=await dn(p,a,o,s,h,v,R,d,i)}catch(S){return h.forEach(b=>{m[b.route.id]={type:A.error,error:S}}),m}for(let[S,b]of Object.entries(P))if(gn(b)){let w=b.result;m[S]={type:A.redirect,response:cn(w,s,S,v,u,g.v7_relativeSplatPath)}}else m[S]=await fn(b);return m}async function Dt(a,o,s,h,v){let R=a.matches,P=Oe("loader",a,v,s,o,null),m=Promise.all(h.map(async w=>{if(w.matches&&w.match&&w.controller){let C=(await Oe("loader",a,Te(e.history,w.path,w.controller.signal),[w.match],w.matches,w.key))[w.match.route.id];return{[w.key]:C}}else return Promise.resolve({[w.key]:{type:A.error,error:X(404,{pathname:w.path})}})})),S=await P,b=(await m).reduce((w,j)=>Object.assign(w,j),{});return await Promise.all([bn(o,S,v.signal,R,a.loaderData),wn(o,b,h)]),{loaderResults:S,fetcherResults:b}}function lt(){ye=!0,Ve.push(...dt()),Me.forEach((a,o)=>{k.has(o)&&($e.add(o),he(o))})}function ce(a,o,s){s===void 0&&(s={}),f.fetchers.set(a,o),G({fetchers:new Map(f.fetchers)},{flushSync:(s&&s.flushSync)===!0})}function se(a,o,s,h){h===void 0&&(h={});let v=Fe(f.matches,o);Ge(a),G({errors:{[v.route.id]:s},fetchers:new Map(f.fetchers)},{flushSync:(h&&h.flushSync)===!0})}function St(a){return g.v7_fetcherPersist&&(_e.set(a,(_e.get(a)||0)+1),le.has(a)&&le.delete(a)),f.fetchers.get(a)||en}function Ge(a){let o=f.fetchers.get(a);k.has(a)&&!(o&&o.state==="loading"&&Pe.has(a))&&he(a),Me.delete(a),Pe.delete(a),oe.delete(a),le.delete(a),$e.delete(a),f.fetchers.delete(a)}function mr(a){if(g.v7_fetcherPersist){let o=(_e.get(a)||0)-1;o<=0?(_e.delete(a),le.add(a)):_e.set(a,o)}else Ge(a);G({fetchers:new Map(f.fetchers)})}function he(a){let o=k.get(a);U(o,"Expected fetch controller: "+a),o.abort(),k.delete(a)}function Et(a){for(let o of a){let s=St(o),h=me(s.data);f.fetchers.set(o,h)}}function Pt(){let a=[],o=!1;for(let s of oe){let h=f.fetchers.get(s);U(h,"Expected fetcher: "+s),h.state==="loading"&&(oe.delete(s),a.push(s),o=!0)}return Et(a),o}function Mt(a){let o=[];for(let[s,h]of Pe)if(h<a){let v=f.fetchers.get(s);U(v,"Expected fetcher: "+s),v.state==="loading"&&(he(s),Pe.delete(s),o.push(s))}return Et(o),o.length>0}function gr(a,o){let s=f.blockers.get(a)||ze;return be.get(a)!==o&&be.set(a,o),s}function xt(a){f.blockers.delete(a),be.delete(a)}function Xe(a,o){let s=f.blockers.get(a)||ze;U(s.state==="unblocked"&&o.state==="blocked"||s.state==="blocked"&&o.state==="blocked"||s.state==="blocked"&&o.state==="proceeding"||s.state==="blocked"&&o.state==="unblocked"||s.state==="proceeding"&&o.state==="unblocked","Invalid blocker state transition: "+s.state+" -> "+o.state);let h=new Map(f.blockers);h.set(a,o),G({blockers:h})}function Lt(a){let{currentLocation:o,nextLocation:s,historyAction:h}=a;if(be.size===0)return;be.size>1&&Ce(!1,"A router only supports one blocker at a time");let v=Array.from(be.entries()),[R,P]=v[v.length-1],m=f.blockers.get(R);if(!(m&&m.state==="proceeding")&&P({currentLocation:o,nextLocation:s,historyAction:h}))return R}function st(a){let o=X(404,{pathname:a}),s=c||l,{matches:h,route:v}=$t(s);return dt(),{notFoundMatches:h,route:v,error:o}}function Qe(a,o){return{boundaryId:Fe(o.partialMatches).route.id,error:X(400,{type:"route-discovery",pathname:a,message:o.error!=null&&"message"in o.error?o.error:String(o.error)})}}function dt(a){let o=[];return ve.forEach((s,h)=>{(!a||a(h))&&(s.cancel(),o.push(h),ve.delete(h))}),o}function yr(a,o,s){if(L=a,O=o,N=s||null,!ie&&f.navigation===ft){ie=!0;let h=jt(f.location,f.matches);h!=null&&G({restoreScrollPosition:h})}return()=>{L=null,O=null,N=null}}function Tt(a,o){return N&&N(a,o.map(h=>Mr(h,f.loaderData)))||a.key}function vr(a,o){if(L&&O){let s=Tt(a,o);L[s]=O()}}function jt(a,o){if(L){let s=Tt(a,o),h=L[s];if(typeof h=="number")return h}return null}function Ze(a,o,s){if(y){if(M.has(s))return{active:!1,matches:a};if(a){if(Object.keys(a[0].params).length>0)return{active:!0,matches:it(o,s,u,!0)}}else return{active:!0,matches:it(o,s,u,!0)||[]}}return{active:!1,matches:null}}async function qe(a,o,s){let h=a;for(;;){let v=c==null,R=c||l;try{await on(y,o,h,R,d,i,ar,s)}catch(S){return{type:"error",error:S,partialMatches:h}}finally{v&&(l=[...l])}if(s.aborted)return{type:"aborted"};let P=je(R,o,u);if(P)return Ft(o,M),{type:"success",matches:P};let m=it(R,o,u,!0);if(!m||h.length===m.length&&h.every((S,b)=>S.route.id===m[b].route.id))return Ft(o,M),{type:"success",matches:null};h=m}}function Ft(a,o){if(o.size>=F){let s=o.values().next().value;o.delete(s)}o.add(a)}function br(a){d={},c=Ke(a,i,void 0,d)}function wr(a,o){let s=c==null;tr(a,o,c||l,d,i),s&&(l=[...l],G({}))}return Ue={get basename(){return u},get future(){return g},get state(){return f},get routes(){return l},get window(){return t},initialize:ir,subscribe:lr,enableScrollRestoration:yr,navigate:wt,fetch:cr,revalidate:sr,createHref:a=>e.history.createHref(a),encodeLocation:a=>e.history.encodeLocation(a),getFetcher:St,deleteFetcher:mr,dispose:or,getBlocker:gr,deleteBlocker:xt,patchRoutes:wr,_internalFetchControllers:k,_internalActiveDeferreds:ve,_internalSetRoutes:br},Ue}function rn(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function pt(e,t,n,r,i,d,l,c){let u,p;if(l){u=[];for(let g of t)if(u.push(g),g.route.id===l){p=g;break}}else u=t,p=t[t.length-1];let y=Wr(i||".",Hr(u,d),ot(e.pathname,n)||e.pathname,c==="path");return i==null&&(y.search=e.search,y.hash=e.hash),(i==null||i===""||i===".")&&p&&p.route.index&&!bt(y.search)&&(y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(y.pathname=y.pathname==="/"?n:He([n,y.pathname])),ke(y)}function zt(e,t,n,r){if(!r||!rn(r))return{path:n};if(r.formMethod&&!vn(r.formMethod))return{path:n,error:X(405,{method:r.formMethod})};let i=()=>({path:n,error:X(400,{type:"invalid-body"})}),d=r.formMethod||"get",l=e?d.toUpperCase():d.toLowerCase(),c=rr(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ne(l))return i();let D=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((E,F)=>{let[M,L]=F;return""+E+M+"="+L+`
`},""):String(r.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:D}}}else if(r.formEncType==="application/json"){if(!ne(l))return i();try{let D=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:D,text:void 0}}}catch{return i()}}}U(typeof FormData=="function","FormData is not available in this environment");let u,p;if(r.formData)u=mt(r.formData),p=r.formData;else if(r.body instanceof FormData)u=mt(r.body),p=r.body;else if(r.body instanceof URLSearchParams)u=r.body,p=Wt(u);else if(r.body==null)u=new URLSearchParams,p=new FormData;else try{u=new URLSearchParams(r.body),p=Wt(u)}catch{return i()}let y={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(ne(y.formMethod))return{path:n,submission:y};let g=Se(n);return t&&g.search&&bt(g.search)&&u.append("index",""),g.search="?"+u,{path:ke(g),submission:y}}function nn(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function Nt(e,t,n,r,i,d,l,c,u,p,y,g,D,E,F,M){let L=M?q(M[1])?M[1].error:M[1].data:void 0,N=e.createURL(t.location),O=e.createURL(i),ie=M&&q(M[1])?M[0]:void 0,K=ie?nn(n,ie):n,te=M?M[1].statusCode:void 0,ae=l&&te&&te>=400,Ue=K.filter((B,J)=>{let{route:_}=B;if(_.lazy)return!0;if(_.loader==null)return!1;if(d)return typeof _.loader!="function"||_.loader.hydrate?!0:t.loaderData[_.id]===void 0&&(!t.errors||t.errors[_.id]===void 0);if(an(t.loaderData,t.matches[J],B)||u.some(re=>re===B.route.id))return!0;let Q=t.matches[J],ee=B;return Bt(B,z({currentUrl:N,currentParams:Q.params,nextUrl:O,nextParams:ee.params},r,{actionResult:L,actionStatus:te,defaultShouldRevalidate:ae?!1:c||N.pathname+N.search===O.pathname+O.search||N.search!==O.search||er(Q,ee)}))}),f=[];return g.forEach((B,J)=>{if(d||!n.some(Ee=>Ee.route.id===B.routeId)||y.has(J))return;let _=je(E,B.path,F);if(!_){f.push({key:J,routeId:B.routeId,path:B.path,matches:null,match:null,controller:null});return}let Q=t.fetchers.get(J),ee=Be(_,B.path),re=!1;D.has(J)?re=!1:p.has(J)?(p.delete(J),re=!0):Q&&Q.state!=="idle"&&Q.data===void 0?re=c:re=Bt(ee,z({currentUrl:N,currentParams:t.matches[t.matches.length-1].params,nextUrl:O,nextParams:n[n.length-1].params},r,{actionResult:L,actionStatus:te,defaultShouldRevalidate:ae?!1:c})),re&&f.push({key:J,routeId:B.routeId,path:B.path,matches:_,match:ee,controller:new AbortController})}),[Ue,f]}function an(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function er(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Bt(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function on(e,t,n,r,i,d,l,c){let u=[t,...n.map(p=>p.route.id)].join("-");try{let p=l.get(u);p||(p=e({path:t,matches:n,patch:(y,g)=>{c.aborted||tr(y,g,r,i,d)}}),l.set(u,p)),p&&mn(p)&&await p}finally{l.delete(u)}}function tr(e,t,n,r,i){if(e){var d;let l=r[e];U(l,"No route found to patch children into: routeId = "+e);let c=Ke(t,i,[e,"patch",String(((d=l.children)==null?void 0:d.length)||"0")],r);l.children?l.children.push(...c):l.children=c}else{let l=Ke(t,i,["patch",String(n.length||"0")],r);n.push(...l)}}async function ln(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];U(i,"No route found in manifest");let d={};for(let l in r){let u=i[l]!==void 0&&l!=="hasErrorBoundary";Ce(!u,'Route "'+i.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!u&&!Er.has(l)&&(d[l]=r[l])}Object.assign(i,d),Object.assign(i,z({},t(i),{lazy:void 0}))}async function sn(e){let{matches:t}=e,n=t.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,d,l)=>Object.assign(i,{[n[l].route.id]:d}),{})}async function dn(e,t,n,r,i,d,l,c,u,p){let y=d.map(E=>E.route.lazy?ln(E.route,u,c):void 0),g=d.map((E,F)=>{let M=y[F],L=i.some(O=>O.route.id===E.route.id);return z({},E,{shouldLoad:L,resolve:async O=>(O&&r.method==="GET"&&(E.route.lazy||E.route.loader)&&(L=!0),L?un(t,r,E,M,O,p):Promise.resolve({type:A.data,result:void 0}))})}),D=await e({matches:g,request:r,params:d[0].params,fetcherKey:l,context:p});try{await Promise.all(y)}catch{}return D}async function un(e,t,n,r,i,d){let l,c,u=p=>{let y,g=new Promise((F,M)=>y=M);c=()=>y(),t.signal.addEventListener("abort",c);let D=F=>typeof p!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):p({request:t,params:n.params,context:d},...F!==void 0?[F]:[]),E=(async()=>{try{return{type:"data",result:await(i?i(M=>D(M)):D())}}catch(F){return{type:"error",result:F}}})();return Promise.race([E,g])};try{let p=n.route[e];if(r)if(p){let y,[g]=await Promise.all([u(p).catch(D=>{y=D}),r]);if(y!==void 0)throw y;l=g}else if(await r,p=n.route[e],p)l=await u(p);else if(e==="action"){let y=new URL(t.url),g=y.pathname+y.search;throw X(405,{method:t.method,pathname:g,routeId:n.route.id})}else return{type:A.data,result:void 0};else if(p)l=await u(p);else{let y=new URL(t.url),g=y.pathname+y.search;throw X(404,{pathname:g})}U(l.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(p){return{type:A.error,result:p}}finally{c&&t.signal.removeEventListener("abort",c)}return l}async function fn(e){let{result:t,type:n}=e;if(nr(t)){let p;try{let y=t.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?t.body==null?p=null:p=await t.json():p=await t.text()}catch(y){return{type:A.error,error:y}}return n===A.error?{type:A.error,error:new ht(t.status,t.statusText,p),statusCode:t.status,headers:t.headers}:{type:A.data,data:p,statusCode:t.status,headers:t.headers}}if(n===A.error){if(Yt(t)){var r;if(t.data instanceof Error){var i;return{type:A.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status}}t=new ht(((r=t.init)==null?void 0:r.status)||500,void 0,t.data)}return{type:A.error,error:t,statusCode:gt(t)?t.status:void 0}}if(yn(t)){var d,l;return{type:A.deferred,deferredData:t,statusCode:(d=t.init)==null?void 0:d.status,headers:((l=t.init)==null?void 0:l.headers)&&new Headers(t.init.headers)}}if(Yt(t)){var c,u;return{type:A.data,data:t.data,statusCode:(c=t.init)==null?void 0:c.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}}return{type:A.data,data:t}}function cn(e,t,n,r,i,d){let l=e.headers.get("Location");if(U(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!yt.test(l)){let c=r.slice(0,r.findIndex(u=>u.route.id===n)+1);l=pt(new URL(t.url),c,i,!0,l,d),e.headers.set("Location",l)}return e}function Ht(e,t,n){if(yt.test(e)){let r=e,i=r.startsWith("//")?new URL(t.protocol+r):new URL(r),d=ot(i.pathname,n)!=null;if(i.origin===t.origin&&d)return i.pathname+i.search+i.hash}return e}function Te(e,t,n,r){let i=e.createURL(rr(t)).toString(),d={signal:n};if(r&&ne(r.formMethod)){let{formMethod:l,formEncType:c}=r;d.method=l.toUpperCase(),c==="application/json"?(d.headers=new Headers({"Content-Type":c}),d.body=JSON.stringify(r.json)):c==="text/plain"?d.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?d.body=mt(r.formData):d.body=r.formData}return new Request(i,d)}function mt(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function Wt(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function hn(e,t,n,r,i){let d={},l=null,c,u=!1,p={},y=n&&q(n[1])?n[1].error:void 0;return e.forEach(g=>{if(!(g.route.id in t))return;let D=g.route.id,E=t[D];if(U(!De(E),"Cannot handle redirect results in processLoaderData"),q(E)){let F=E.error;y!==void 0&&(F=y,y=void 0),l=l||{};{let M=Fe(e,D);l[M.route.id]==null&&(l[M.route.id]=F)}d[D]=void 0,u||(u=!0,c=gt(E.error)?E.error.status:500),E.headers&&(p[D]=E.headers)}else ge(E)?(r.set(D,E.deferredData),d[D]=E.deferredData.data,E.statusCode!=null&&E.statusCode!==200&&!u&&(c=E.statusCode),E.headers&&(p[D]=E.headers)):(d[D]=E.data,E.statusCode&&E.statusCode!==200&&!u&&(c=E.statusCode),E.headers&&(p[D]=E.headers))}),y!==void 0&&n&&(l={[n[0]]:y},d[n[0]]=void 0),{loaderData:d,errors:l,statusCode:c||200,loaderHeaders:p}}function Kt(e,t,n,r,i,d,l,c){let{loaderData:u,errors:p}=hn(t,r,i,c);return d.forEach(y=>{let{key:g,match:D,controller:E}=y,F=l[g];if(U(F,"Did not find corresponding fetcher result"),!(E&&E.signal.aborted))if(q(F)){let M=Fe(e.matches,D==null?void 0:D.route.id);p&&p[M.route.id]||(p=z({},p,{[M.route.id]:F.error})),e.fetchers.delete(g)}else if(De(F))U(!1,"Unhandled fetcher revalidation redirect");else if(ge(F))U(!1,"Unhandled fetcher deferred data");else{let M=me(F.data);e.fetchers.set(g,M)}}),{loaderData:u,errors:p}}function kt(e,t,n,r){let i=z({},t);for(let d of n){let l=d.route.id;if(t.hasOwnProperty(l)?t[l]!==void 0&&(i[l]=t[l]):e[l]!==void 0&&d.route.loader&&(i[l]=e[l]),r&&r.hasOwnProperty(l))break}return i}function Vt(e){return e?q(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Fe(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function $t(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function X(e,t){let{pathname:n,routeId:r,method:i,type:d,message:l}=t===void 0?{}:t,c="Unknown Server Error",u="Unknown @remix-run/router error";return e===400?(c="Bad Request",d==="route-discovery"?u='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+l):i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":d==="defer-action"?u="defer() is not supported in actions":d==="invalid-body"&&(u="Unable to encode submission body")):e===403?(c="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):e===404?(c="Not Found",u='No route matches URL "'+n+'"'):e===405&&(c="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new ht(e||500,c,new Error(u),!0)}function at(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,i]=t[n];if(De(i))return{key:r,result:i}}}function rr(e){let t=typeof e=="string"?Se(e):e;return ke(z({},t,{hash:""}))}function pn(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function mn(e){return typeof e=="object"&&e!=null&&"then"in e}function gn(e){return nr(e.result)&&Zr.has(e.result.status)}function ge(e){return e.type===A.deferred}function q(e){return e.type===A.error}function De(e){return(e&&e.type)===A.redirect}function Yt(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function yn(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function nr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function vn(e){return Qr.has(e.toLowerCase())}function ne(e){return Gr.has(e.toLowerCase())}async function bn(e,t,n,r,i){let d=Object.entries(t);for(let l=0;l<d.length;l++){let[c,u]=d[l],p=e.find(D=>(D==null?void 0:D.route.id)===c);if(!p)continue;let y=r.find(D=>D.route.id===p.route.id),g=y!=null&&!er(y,p)&&(i&&i[p.route.id])!==void 0;ge(u)&&g&&await vt(u,n,!1).then(D=>{D&&(t[c]=D)})}}async function wn(e,t,n){for(let r=0;r<n.length;r++){let{key:i,routeId:d,controller:l}=n[r],c=t[i];e.find(p=>(p==null?void 0:p.route.id)===d)&&ge(c)&&(U(l,"Expected an AbortController for revalidating fetcher deferred result"),await vt(c,l.signal,!0).then(p=>{p&&(t[i]=p)}))}}async function vt(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:A.data,data:e.deferredData.unwrappedData}}catch(i){return{type:A.error,error:i}}return{type:A.data,data:e.deferredData.data}}}function bt(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Be(e,t){let n=typeof t=="string"?Se(t).search:t.search;if(e[e.length-1].route.index&&bt(n||""))return e[e.length-1];let r=Qt(e);return r[r.length-1]}function Jt(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:d,json:l}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(d!=null)return{formMethod:t,formAction:n,formEncType:r,formData:d,json:void 0,text:void 0};if(l!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function ct(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Rn(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Ne(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Dn(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function me(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Sn(e,t){try{let n=e.sessionStorage.getItem(qt);if(n){let r=JSON.parse(n);for(let[i,d]of Object.entries(r||{}))d&&Array.isArray(d)&&t.set(i,new Set(d||[]))}}catch{}}function En(e,t){if(t.size>0){let n={};for(let[r,i]of t)n[r]=[...i];try{e.sessionStorage.setItem(qt,JSON.stringify(n))}catch(r){Ce(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}export{$ as A,Ln as D,ht as E,Pn as a,Wr as b,jn as c,He as d,Mr as e,It as f,Hr as g,gt as h,U as i,Mn as j,ke as k,Ot as l,je as m,xn as n,Se as p,Tn as r,ot as s};
